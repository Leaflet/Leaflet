<!DOCTYPE html>
<html>
<!--
- Demo on using SVG elements in place of picture.
-->

<head>
	<title>Leaflet debug page</title>

	<link rel="stylesheet" href="../../dist/leaflet.css" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="../css/screen.css" />

	<script type="text/javascript" src="../../build/deps.js"></script>
	<script src="../leaflet-include.js"></script>

  <!-- Snap.svg
  -->
  <script src="http://cdn.jsdelivr.net/snap.svg/0.3.0/snap.svg-min.js"></script>
</head>
<body>

	<div id="map">
  </div>
  
  <svg id="testsvg"></svg>

	<script type="text/javascript">
    var HELSINKI= new L.LatLng( 60.192059, 24.945831 );

		var osmUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
			osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
			osm = L.tileLayer(osmUrl, {maxZoom: 18, attribution: osmAttrib});
			latlng = HELSINKI;

		var map = new L.Map('map');
		map.addLayer(osm);

		var	bounds = new L.LatLngBounds(
                   new L.LatLng( 60.19473, 24.93961 ),   // NW
                   new L.LatLng( 60.18952, 24.95497 )    // SE
                 );

		map.fitBounds(bounds);

    var overlay;
    if (true) {
    
      // This needs a patched Leaflet - image source is an SVG element.
      //
      overlay = L.imageOverlay2( bounds, {
        //opacity: 0.8,     // not available
        interactive: true
      });
    
      // The '<svg>' element must be created like this, programmatically.
      // It will roam free in the DOM until Leaflet shows it where to sit.
      //
      //var svgElem= document.createElementNS('http://www.w3.org/2000/svg','svg');
      
      var svgElem = overlay.svgElem;

      // Add SVG element in use and created by Snap.svg
      //
      var S= Snap( svgElem );
    
      Snap.load( "snapsvg_mascot.svg", function (f) {
        // traverse and change attr before SVG is even added to the page
        f.select("polygon[fill='#09B39C']").attr({fill: "#bada55"});
        var g = f.select("g");
        S.append(g);
        // make croc draggable
        g.drag();
      } );

      //console.log( S.svg() );

      // Can we tie 'S' to the '#map' div, at all?
      //
      // Leaflet will need to do this; if we cannot, so cannot it. AK090215
      //
      //console.log( "S: "+ S );
      document.getElementById("map").appendChild( svgElem );    // yes we can

    } else {
      // SVG from file (works with stock Leaflet)
      //
      overlay = L.imageOverlay("snapsvg_mascot.svg", bounds, {
        opacity: 0.8,
        interactive: true
      });
    }

		map.addLayer(overlay);

		overlay.on('dblclick',function (e) {
			console.log('Double click on image.');
		});

	</script>
</body>
</html>
